apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: wger
    namespace: wger
spec:
    interval: 5m
    install:
        createNamespace: true
        crds: CreateReplace
        remediation:
            retries: 3
    upgrade:
        crds: CreateReplace
        remediation:
            retries: 3
    chart:
        spec:
            chart: wger
            version: 0.2.1
            interval: 5m
            sourceRef:
                kind: HelmRepository
                name: wger
                namespace: flux-system
    values:
      primary:
        annotations:
          backup.velero.io/backup-volumes: postgres-data
      app:
        persistence:
          enable: true
          storageClass: longhorn
        image:
          repository: wger/server
          tag: 2.3-dev
      celery:
        enabled: true

