apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: paperless-ngx
    namespace: paperless-ngx
spec:
    interval: 1h
    install:
        createNamespace: true
        crds: CreateReplace
        remediation:
            retries: 3
    upgrade:
        crds: CreateReplace
        remediation:
            retries: 3
    chart:
        spec:
            chart: paperless-ngx
            version: 0.24.1
            interval: 1h
            sourceRef:
                kind: HelmRepository
                name: gabe565
                namespace: flux-system
    values:
        env:
            PAPERLESS_OCR_LANGUAGES: eng bul
            PAPERLESS_TIKA_ENABLED: "true"
            PAPERLESS_TIKA_ENDPOINT: http://tika.tika:9998
            PAPERLESS_TIKA_GOTENBERG_ENDPOINT: http://gotenberg.gotenberg:80
        podAnnotations:
            backup.velero.io/backup-volumes: data,media,export,consume
        redis:
            image:
                registry: docker.io
                repository: redis
                tag: "8.2"
        service:
            main:
                type: LoadBalancer
                loadBalancerIP: 192.168.1.8
                ports:
                    http:
                        port: 80
        image:
            # -- Image repository
            repository: ghcr.io/paperless-ngx/paperless-ngx
            # -- Image pull policy
            pullPolicy: IfNotPresent
            # -- Image tag
            tag: 2.19.5
        persistence:
            data:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 10Gi
            media:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 100Gi
            export:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 1Gi
            consume:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 4Gi
        ingress:
            main:
                ingressClassName: nginx
                enabled: true
                annotations:
                    gethomepage.dev/enabled: "true"
                    gethomepage.dev/description: Document Management System
                    gethomepage.dev/group: Knowledge
                    gethomepage.dev/icon: paperless-ngx
                    gethomepage.dev/name: Paperless-NGX
                    gethomepage.dev/widget.type: paperlessngx
                    gethomepage.dev/widget.url: https://paperless.sgenov.dev
                    gethomepage.dev/widget.key: ENC[AES256_GCM,data:LtQtmIEBozsG41Om9DE9CPTmwRhNtbLvhuZwQVye5MCHBrfpGXArHg==,iv:tXF0fecbkrn8SNvnmvP3TD6NJpEfJthR8yhgO5sYGwU=,tag:5n2btOZ2z9sdCwcXZNOizA==,type:str]
                hosts:
                    - host: paperless.sgenov.dev
                      paths:
                        - path: /
                tls:
                    - secretName: ingress
                      hosts:
                        - '*.sgenov.dev'
sops:
    age:
        - recipient: age1mq6usjzvvxvcp7tl03yjdqd0kgjhhvhz48kmg86p43nhx0jc75jssw0kfn
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBiL2thdW5obGlaTUIzM2pG
            dzRtYkUzZ0w5OGU4M1hEOGJzSHB0QmUyMnlJCk5RbHRFRkIxbkxJaytmYlhydGxh
            dUwxMEw5N3oxWVlTTUUxVG9yd040U0UKLS0tIG9VcnFiVHlXVVBlK25iSUk5WnBE
            cGNlQVQxTGJJNitzemdmUEk1bG40N28KyKf2AOWCo7Mi8V873OdTSWX3vqpRFS6Q
            N9fOSfQGg28dxXkTp6GN9JCsetLVXorvOAXb1n/EZB1Gc61lI4LDmQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-11-07T13:31:22Z"
    mac: ENC[AES256_GCM,data:Au2MhpfpC9XDp3w3UQxM+O5ODSlO1QIy3IaKvRQsu1IfHpk6Do0Zbly94sEkA3wtrdLISBPN9a9Mp59/BQ2t8ff2Jk8qmVzelJEa73yG+JxpUYP1xbvCPm9GqfqZkMY78eTvf7Lec5VR9kbleQEmq0Q0U43yVqDPMot6TN9GS8M=,iv:Vdg/EeEc0JLWZsf4+UYOBBlZ1BntJnvrTrSLUoJVMw4=,tag:4NouvVTUqLw8aLu3wbI/RQ==,type:str]
    encrypted_regex: (?i)password|webhook_url|token|key
    version: 3.11.0
