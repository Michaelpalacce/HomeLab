apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
    name: paperless-ngx
    namespace: paperless-ngx
spec:
    interval: 1h
    install:
        createNamespace: true
        crds: CreateReplace
        remediation:
            retries: 3
    upgrade:
        crds: CreateReplace
        remediation:
            retries: 3
    chart:
        spec:
            chart: paperless-ngx
            version: 0.24.1
            interval: 1h
            sourceRef:
                kind: HelmRepository
                name: gabe565
                namespace: flux-system
    values:
        env:
            PAPERLESS_OCR_LANGUAGES: eng bul
            PAPERLESS_TIKA_ENABLED: "true"
            PAPERLESS_TIKA_ENDPOINT: http://tika.tika:9998
            PAPERLESS_TIKA_GOTENBERG_ENDPOINT: http://gotenberg.gotenberg:80
        podAnnotations:
            backup.velero.io/backup-volumes: data,media,export,consume
        redis:
            image:
                tag: latest
        service:
            main:
                type: LoadBalancer
                loadBalancerIP: 192.168.1.8
                ports:
                    http:
                        port: 80
        image:
            # -- Image repository
            repository: ghcr.io/paperless-ngx/paperless-ngx
            # -- Image pull policy
            pullPolicy: IfNotPresent
            # -- Image tag
            tag: 2.19.5
        persistence:
            data:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 10Gi
            media:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 100Gi
            export:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 1Gi
            consume:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 4Gi
        ingress:
            main:
                ingressClassName: nginx
                enabled: true
                annotations:
                    gethomepage.dev/enabled: "true"
                    gethomepage.dev/description: Document Management System
                    gethomepage.dev/group: Knowledge
                    gethomepage.dev/icon: paperless-ngx
                    gethomepage.dev/name: Paperless-NGX
                    gethomepage.dev/widget.type: paperlessngx
                    gethomepage.dev/widget.url: https://paperless.sgenov.dev
                    gethomepage.dev/widget.key: ENC[AES256_GCM,data:x6wVx9Tzi5/AdxoNCEXOoSXuDD8oQrEB5MboblNRE0bhlqWkwdRHXQ==,iv:CCJFWDF2rqd5dgBHt/GKQkgFFpcVgOfHNyNtUBPA+IU=,tag:Tq2ECdLn7d7Ohg9eYybzFw==,type:str]
                hosts:
                    - host: paperless.sgenov.dev
                      paths:
                        - path: /
                tls:
                    - secretName: ingress
                      hosts:
                        - '*.sgenov.dev'
sops:
    age:
        - recipient: age1mq6usjzvvxvcp7tl03yjdqd0kgjhhvhz48kmg86p43nhx0jc75jssw0kfn
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBaZmNBZHliWW16UDlVTHJL
            OFZPWGplVVRINDZrK25NL2tMRzdJRjRHVFdzCm9kekFVeit5Tkl1TTNhNGVMMFcw
            R2dKN2lPOWsyZ3ViR0lndlB1RFUwWlkKLS0tIDNhbkpNQjZjR2psZHhGSFUzRDEw
            V0xUTTJZQmYyeThCV1FRWEh1c0hLZzQKILA8218SsOPK0BG1RQNCJUpj6dMeBd9L
            jStOOdwauwhDD+50hDgRR0O9AZiduPzwua8YgWA/vzjhQjH8XlhE2A==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-11-07T13:41:42Z"
    mac: ENC[AES256_GCM,data:Fyld3/9o2SPncqV86CS4JydLWsSGNPZzN1hgtLGsfR9rpGdUDfS2qreMPPgU0ex9j4EOIxTYGNWhH6IxIB4oVwfdCH33Amb0eoV2eqE6EGdWgTs0NVtBN2xUgPSrVr57i084QJEPEpTOL9G14GAtkR8C7gm7bUy4KxUOYETy2Ho=,iv:m0i/7zF2vRfdB4nlYKbwB9RQkNQQ2hRxBdXZn9LMses=,tag:SnqDgIYMk8zl/T6yvX/dwQ==,type:str]
    encrypted_regex: (?i)password|webhook_url|token|key
    version: 3.11.0
