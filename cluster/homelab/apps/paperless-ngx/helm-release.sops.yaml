apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
    name: paperless-ngx
    namespace: paperless-ngx
spec:
    interval: 5m
    install:
        createNamespace: true
        crds: CreateReplace
        remediation:
            retries: 3
    upgrade:
        crds: CreateReplace
        remediation:
            retries: 3
    chart:
        spec:
            chart: paperless-ngx
            version: 0.17.0
            interval: 5m
            sourceRef:
                kind: HelmRepository
                name: gabe565
                namespace: flux-system
    values:
        env:
            PAPERLESS_OCR_LANGUAGES: eng bul
        podAnnotations:
            backup.velero.io/backup-volumes: data,media,export,consume
        image:
            # -- Image repository
            repository: ghcr.io/paperless-ngx/paperless-ngx
            # -- Image pull policy
            pullPolicy: IfNotPresent
            # -- Image tag
            tag: 2.8.2
        persistence:
            data:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 10Gi
            media:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 100Gi
            export:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 1Gi
            consume:
                enabled: true
                storageClass: longhorn
                accessMode: ReadWriteOnce
                size: 4Gi
        ingress:
            main:
                ingressClassName: nginx
                enabled: true
                annotations:
                    gethomepage.dev/enabled: ENC[AES256_GCM,data:SYPExA==,iv:ajrZbZoVD/RR2St5PE8pXJvJ9PfUfbW4vYVlVZ0vuCU=,tag:ybXCz8RzIZmeVx2gQ8et9Q==,type:str]
                    gethomepage.dev/description: ENC[AES256_GCM,data:2Gyrf1qHGOVS6nY/D9chh/Rki2tc6fGnV3o=,iv:JStIiJ3UQbxsrP/x6OQMmHKLZhHudEdBj1eCHSvSOZ8=,tag:2UnL6bDWibG87y5eqqdl/w==,type:str]
                    gethomepage.dev/group: ENC[AES256_GCM,data:OnRnpfCOF3KM,iv:G3sKYUWCwnf428PajAIIQaAOM+cm01BCkbTJIl9EmRM=,tag:pNerOk2NwndtKMZk7xCQHA==,type:str]
                    gethomepage.dev/icon: ENC[AES256_GCM,data:LrVT7vxHVkoGvqZGCw==,iv:E95MrxfwwuQ3yf9uRlxH4KzQ6GoA7dSOOGfe60K/doA=,tag:88Vrn5Tif4v7E4FskGEEow==,type:str]
                    gethomepage.dev/name: ENC[AES256_GCM,data:jZmzq3yyCxSh2DYHvw==,iv:UFZuFKf6zsoliFevi7BSAawbV5T7XFYJdoeZP7Ew02Y=,tag:JHmLvECZvjAaPtNn8SrOCQ==,type:str]
                    gethomepage.dev/widget.type: ENC[AES256_GCM,data:EHiTvTz0/eICwc1r,iv:6104kyRn0GZv1xhvhM5ytt79c6JQPzEOI8+V1cbHlf8=,tag:4BU46vSsnIdp0C1MWmlBEw==,type:str]
                    gethomepage.dev/widget.url: ENC[AES256_GCM,data:efUjIDKUYWFhl3fpomWSi2PrEsAomhPUxtcoyi2NVO6XXQ==,iv:/Q2xgb6/JjzbYL1vxzzGJgu8LRt9Wl0F/FvspQbfhJM=,tag:+EJrF0WtD+16bDYOs3horg==,type:str]
                    gethomepage.dev/widget.key: ENC[AES256_GCM,data:Re+fbiO3UKZWGDNt20lSDEB2NqoprIfSWLjEyLUMKNo1M6Lety1QeQ==,iv:ANWbN04nlKNSknCmg+Pp5NXhCEftd1rLfn9yvKnAIf4=,tag:PqQsK3Zfjbc2ILg8m/UEFg==,type:str]
                hosts:
                    - host: paperless.stefangenov.site
                      paths:
                        - path: /
                tls:
                    - secretName: ingress
                      hosts:
                        - '*.stefangenov.site'
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1mq6usjzvvxvcp7tl03yjdqd0kgjhhvhz48kmg86p43nhx0jc75jssw0kfn
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmd1prNmFsRytSand3dU9S
            SFJVb0pJbGovNk41SFhjVFFvZzNlQVFWNzEwCmtlZ0M4YkttNERndnNiVTNUbnA3
            UlNBbkh6VXMyeCszSkVRVWRoMk1BYkUKLS0tICtBUEhMVHA4YkpaM1hNbWlKdkR1
            cmdjQW9tYmJNNzVIMDhWalJpT1BCV28KZ1H1N1iShgeLRs4t8pqslhiSeyh547N8
            dlb0DbkrQjkNwQpjEztZybe0ng4l4J+yxp4A1lU0xmZhbzhXHIQ5Fg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-15T13:53:15Z"
    mac: ENC[AES256_GCM,data:w2jize1mPw92mBFDe8Sz+5HZ+K6E8cMqbC0YRAubqtZtxaUKxcGe2C+sCgbm1k5B9VhqCUaMc43apZ3T/y+kic+s4WmxosLy6w4wAt/ZulCKiBjmJ8SUXI2OdVFM5dz1kCAeHjvv1DGrT/EKc7kS9CnSrI/aKuX88SiiLdfXLJE=,iv:3lgsxFVgL9NVqBTj3HxoKoE/XkSp+8HgKwIHT6SDrjc=,tag:irW8jEdG8OHGZHUcaTCAkg==,type:str]
    pgp: []
    encrypted_regex: ^(rules|annotations|)$
    version: 3.8.1
