apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
    name: paperless-ngx-external
    namespace: paperless-ngx
spec:
    parentRefs:
        - name: external
          namespace: istio-gateway
    hostnames:
        - paperless.sgenov.dev
    rules:
        - matches:
            - path:
                type: PathPrefix
                value: /
          backendRefs:
            - name: paperless-ngx
              port: 80
sops:
    age:
        - recipient: age1mq6usjzvvxvcp7tl03yjdqd0kgjhhvhz48kmg86p43nhx0jc75jssw0kfn
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSArQ1QzVGpzYzVaWnU5bHQ2
            K25JZG9JNjRnZE1ERkZINTY0U0pidGdNN0NBCnJ4eEVya29tTEdoQllaSW1Ja3V3
            YWxqWjZxODdMNUVEUlhzUnZXeW1OckEKLS0tIC9sYkRRNDh4eWNJaWlaamJqVmtM
            MmdKRmVRQzVWNzVrZHp2U2dmZllnK00KzJ8nbGiRMtzzxRwBY3ixXOiZ3DIl+Idh
            OEMEBvdYpjVkxL6pXnFmcw1qzvq5ddeGe8m6uuy8u5NO9yxShqrKBA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-11-16T14:23:48Z"
    mac: ENC[AES256_GCM,data:XNuJvx7uQPkB+kJCDopO36GZ44to6sEMU0FpF8nJw+CFqdGdoFzqwDq7ThNXDPGM8rSKU+i8quXl1WVO/WvVcvUf/3+5Qp5s4D0QJBNT2csEbqTI0x0sLSADzyuqs38zFR50OBr23J1feHHiE2jMi4kUniMCmv/NoRrHIeVsihA=,iv:tabpzBbjgqhm9WS0Vv9CDTLzgeKUFUn0MzSJsLbQX9M=,tag:eU3ta9koDdIKLPy9zockZA==,type:str]
    encrypted_regex: (?i)password|webhook_url|token|key
    version: 3.11.0
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
    name: paperless-ngx-internal
    namespace: paperless-ngx
    annotations:
        gethomepage.dev/enabled: "true"
        gethomepage.dev/description: Document Management System
        gethomepage.dev/group: Knowledge
        gethomepage.dev/icon: paperless-ngx
        gethomepage.dev/name: Paperless-NGX
        gethomepage.dev/widget.type: paperlessngx
        gethomepage.dev/widget.url: https://paperless.sgenov.dev
        gethomepage.dev/widget.key: ENC[AES256_GCM,data:Rnzez6tBbfRuqOsJ9hDf9hq1x+bg3uGfokqt1vRhVwP1btqFpOqk472WgPp5njB+vIRq6JwntwFarp93ZaLTdejla7Tn1pzLlvqgnmZms/g/6V4R7hGejklHpF4FBP7l8hTVPKqqYFGrJ4h2dlLORnpmaFRGB+pkQy6hP4XFkszgfOkeehflpoQSNMcLIew3tMRDGGR2sKJ23WN5F9mOSwn0mw==,iv:jwRN7MVVzwvJ1A1WAYlNnzBbLEW6fwiGPf4bSlEDKMo=,tag:2B/jfk+a7V9FTSqmtMdyBw==,type:str]
spec:
    parentRefs:
        - name: internal
          namespace: istio-gateway
    hostnames:
        - paperless.sgenov.dev
    rules:
        - matches:
            - path:
                type: PathPrefix
                value: /
          backendRefs:
            - name: paperless-ngx
              port: 80
sops:
    age:
        - recipient: age1mq6usjzvvxvcp7tl03yjdqd0kgjhhvhz48kmg86p43nhx0jc75jssw0kfn
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSArQ1QzVGpzYzVaWnU5bHQ2
            K25JZG9JNjRnZE1ERkZINTY0U0pidGdNN0NBCnJ4eEVya29tTEdoQllaSW1Ja3V3
            YWxqWjZxODdMNUVEUlhzUnZXeW1OckEKLS0tIC9sYkRRNDh4eWNJaWlaamJqVmtM
            MmdKRmVRQzVWNzVrZHp2U2dmZllnK00KzJ8nbGiRMtzzxRwBY3ixXOiZ3DIl+Idh
            OEMEBvdYpjVkxL6pXnFmcw1qzvq5ddeGe8m6uuy8u5NO9yxShqrKBA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-11-16T14:23:48Z"
    mac: ENC[AES256_GCM,data:XNuJvx7uQPkB+kJCDopO36GZ44to6sEMU0FpF8nJw+CFqdGdoFzqwDq7ThNXDPGM8rSKU+i8quXl1WVO/WvVcvUf/3+5Qp5s4D0QJBNT2csEbqTI0x0sLSADzyuqs38zFR50OBr23J1feHHiE2jMi4kUniMCmv/NoRrHIeVsihA=,iv:tabpzBbjgqhm9WS0Vv9CDTLzgeKUFUn0MzSJsLbQX9M=,tag:eU3ta9koDdIKLPy9zockZA==,type:str]
    encrypted_regex: (?i)password|webhook_url|token|key
    version: 3.11.0
